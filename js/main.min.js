jQuery(document).ready(function($){
	var mainHeader = $('.cd-auto-hide-header'),
		secondaryNavigation = $('.cd-secondary-nav'),
		//this applies only if secondary nav is below intro section
		belowNavHeroContent = $('.sub-nav-hero'),
		headerHeight = mainHeader.height();
		currentSection = $(".cd-secondary-nav .active");
	
	//set scrolling variables
	var scrolling = false,
		previousTop = 0,
		currentTop = 0,
		scrollDelta = 10,
		scrollOffset = 150,
		isHidden = false;

	$('body').bind('beforeunload',function(){
		currentSection.removeClass('active');
		var url = window.location.href;
		var host = window.location.host;
		if(url.indexOf('http://' + host + '/resume.html') != -1) {
			currentSection = $("#basicid");
		}
    	currentSection.addClass('active');
	});

	$(document).ready(function() {
		$(this).scrollTop(0);
		$(".headers").on("click", function( e ) {
			e.preventDefault();
			var distance = 0
			if ($(this).offset().top - $( $(this).attr('href') ).offset().top < 0) {
				distance = ($(this).offset().top - $( $(this).attr('href') ).offset().top) + 70;
			} else {
				distance = ($(this).offset().top - $( $(this).attr('href') ).offset().top) - 70;
			}
			offsetDistance = 0; 
			if((distance < 300 && isHidden && distance > 0) 
				|| (distance < -300)|| (distance > -300 && isHidden && distance < 0)) {
				offsetDistance = 100;
			} else {
				offsetDistance = 150;
			}
			$("body, html").stop(true, true).animate({ 
				scrollTop: $( $(this).attr('href') ).offset().top - offsetDistance
			}, 1000);
			currentSection = $(this);
		});
	});

	$(window).on('scroll', function(){
		var position = $(this).scrollTop() + 170;

		$('.section').each(function() {
	        var target = $(this).offset().top;
	        var id = $(this).attr('id');

	        if (position >= target) {
	        	currentSection.removeClass('active');
	        	currentSection = $('.cd-secondary-nav > ul > li > a[href="#' + id + '"]');
            	$('.cd-secondary-nav > ul > li > a[href="#' + id + '"]').addClass('active');
	        }
    	});

		if( !scrolling ) {
			scrolling = true;
			(!window.requestAnimationFrame)
				? setTimeout(autoHideHeader, 500)
				: requestAnimationFrame(autoHideHeader);
		}
	});

	mainHeader.on('click', '.nav-trigger', function(event){
		// open primary navigation on mobile
		event.preventDefault();
		mainHeader.toggleClass('nav-open');
	});

	$(window).on('resize', function(){
		headerHeight = mainHeader.height();
	});

	function autoHideHeader() {
		var currentTop = $(window).scrollTop();

		( belowNavHeroContent.length > 0 ) 
			? checkStickyNavigation(currentTop) // secondary navigation below intro
			: checkSimpleNavigation(currentTop);

	   	previousTop = currentTop;
		scrolling = false;
	}

	function checkSimpleNavigation(currentTop) {
		//there's no secondary nav or secondary nav is below primary nav
	    if (previousTop - currentTop > scrollDelta) {
	    	//if scrolling up...
	    	mainHeader.removeClass('is-hidden');
	    	isHidden = false;
	    } else if( currentTop - previousTop > scrollDelta && currentTop > scrollOffset) {
	    	//if scrolling down...
	    	mainHeader.addClass('is-hidden');
	    	isHidden = true;
	    }
	}

	function checkStickyNavigation(currentTop) {
		//secondary nav below intro section - sticky secondary nav
		var secondaryNavOffsetTop = belowNavHeroContent.offset().top - secondaryNavigation.height() - mainHeader.height();
		
		if (previousTop >= currentTop ) {
	    	//if scrolling up... 
	    	if( currentTop < secondaryNavOffsetTop) {
	    		//secondary nav is not fixed
	    		mainHeader.removeClass('is-hidden');
	    		secondaryNavigation.removeClass('fixed slide-up');
	    		belowNavHeroContent.removeClass('secondary-nav-fixed');
	    		isHidden = false;
	    	} else if( previousTop - currentTop > scrollDelta) {
	    		//secondary nav is fixed
	    		mainHeader.removeClass('is-hidden');
	    		secondaryNavigation.removeClass('slide-up').addClass('fixed'); 
	    		belowNavHeroContent.addClass('secondary-nav-fixed');
	    		isHidden = false;
	    	}
	    	
	    } else {
	    	//if scrolling down...	
	 	  	if( currentTop > secondaryNavOffsetTop + scrollOffset) {
	 	  		//hide primary nav
	    		mainHeader.addClass('is-hidden');
	    		secondaryNavigation.addClass('fixed slide-up');
	    		belowNavHeroContent.addClass('secondary-nav-fixed');
	    		isHidden = true;
	    	} else if( currentTop > secondaryNavOffsetTop) {
	    		//once the secondary nav is fixed, do not hide primary nav if you haven't scrolled more than scrollOffset 
	    		mainHeader.removeClass('is-hidden');
	    		secondaryNavigation.addClass('fixed').removeClass('slide-up');
	    		belowNavHeroContent.addClass('secondary-nav-fixed');
	    		isHidden = true;
	    	}
	    }
	}

	function hasClass(element, cls) {
	    return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
	}
});
/*!
 * smoothState.js is jQuery plugin that progressively enhances
 * page loads to behave more like a single-page application.
 *
 * @author  Miguel Ángel Pérez   reachme@miguel-perez.com
 * @see     http://smoothstate.com
 *
 */
!function(t){"use strict";"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,n,o){"use strict";if(!e.history.pushState)return t.fn.smoothState=function(){return this},void(t.fn.smoothState.options={});if(!t.fn.smoothState){var r=t("html, body"),a=e.console,i={debug:!1,anchors:"a",hrefRegex:"",forms:"form",allowFormCaching:!1,repeatDelay:500,blacklist:".no-smoothState",prefetch:!1,prefetchOn:"mouseover touchstart",prefetchBlacklist:".no-prefetch",locationHeader:"X-SmoothState-Location",cacheLength:0,loadingClass:"is-loading",scroll:!0,alterRequest:function(t){return t},alterChangeState:function(t,e,n){return t},onBefore:function(t,e){},onStart:{duration:0,render:function(t){}},onProgress:{duration:0,render:function(t){}},onReady:{duration:0,render:function(t,e){t.html(e)}},onAfter:function(t,e){}},s={isExternal:function(t){var n=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof n[1]&&n[1].length>0&&n[1].toLowerCase()!==e.location.protocol?!0:"string"==typeof n[2]&&n[2].length>0&&n[2].replace(new RegExp(":("+{"http:":80,"https:":443}[e.location.protocol]+")?$"),"")!==e.location.host},stripHash:function(t){return t.replace(/#.*/,"")},isHash:function(t,n){n=n||e.location.href;var o=t.indexOf("#")>-1,r=s.stripHash(t)===s.stripHash(n);return o&&r},translate:function(e){var n={dataType:"html",type:"GET"};return e="string"==typeof e?t.extend({},n,{url:e}):t.extend({},n,e)},shouldLoadAnchor:function(t,e,n){var r=t.prop("href");return!(s.isExternal(r)||s.isHash(r)||t.is(e)||t.prop("target")||typeof n!==o&&""!==n&&-1===t.prop("href").search(n))},clearIfOverCapacity:function(t,e){return Object.keys||(Object.keys=function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}),Object.keys(t).length>e&&(t={}),t},storePageIn:function(e,n,o,r,a,i){var s=t("<html></html>").append(t(o));return"undefined"==typeof a&&(a={}),"undefined"==typeof i&&(i=n),e[n]={status:"loaded",title:s.find("title").first().text(),html:s.find("#"+r),doc:o,state:a,destUrl:i},e},triggerAllAnimationEndEvent:function(e,n){n=" "+n||"";var o=0,r="animationstart webkitAnimationStart oanimationstart MSAnimationStart",a="animationend webkitAnimationEnd oanimationend MSAnimationEnd",i="allanimationend",l=function(n){t(n.delegateTarget).is(e)&&(n.stopPropagation(),o++)},u=function(n){t(n.delegateTarget).is(e)&&(n.stopPropagation(),o--,0===o&&e.trigger(i))};e.on(r,l),e.on(a,u),e.on("allanimationend"+n,function(){o=0,s.redraw(e)})},redraw:function(t){t.height()}},l=function(n){if(null!==n.state){var o=e.location.href,r=t("#"+n.state.id),a=r.data("smoothState"),i=a.href!==o&&!s.isHash(o,a.href),l=n.state!==a.cache[a.href].state;(i||l)&&(l&&a.clear(a.href),a.load(o,!1))}},u=function(i,l){var u=t(i),c=u.prop("id"),f=null,d=!1,h={},p={},g=e.location.href,m=function(t){t=t||!1,t&&h.hasOwnProperty(t)?delete h[t]:h={},u.data("smoothState").cache=h},y=function(e,n){n=n||t.noop;var o=s.translate(e);if(h=s.clearIfOverCapacity(h,l.cacheLength),!h.hasOwnProperty(o.url)||"undefined"!=typeof o.data){h[o.url]={status:"fetching"};var r=t.ajax(o);r.done(function(t){s.storePageIn(h,o.url,t,c),u.data("smoothState").cache=h}),r.fail(function(){h[o.url].status="error"}),l.locationHeader&&r.always(function(t,e,n){var r=t.statusCode?t:n,a=r.getResponseHeader(l.locationHeader);a&&(h[o.url].destUrl=a)}),n&&r.always(n)}},v=function(){if(f){var e=t(f,u);if(e.length){var n=e.offset().top;r.scrollTop(n)}f=null}},S=function(o){var i="#"+c,s=h[o]?t(h[o].html.html()):null;s.length?(n.title=h[o].title,u.data("smoothState").href=o,l.loadingClass&&r.removeClass(l.loadingClass),l.onReady.render(u,s),u.one("ss.onReadyEnd",function(){d=!1,l.onAfter(u,s),l.scroll&&v(),O(u)}),e.setTimeout(function(){u.trigger("ss.onReadyEnd")},l.onReady.duration)):!s&&l.debug&&a?a.warn("No element with an id of "+i+" in response from "+o+" in "+h):e.location=o},w=function(t,n,o){var i=s.translate(t);"undefined"==typeof n&&(n=!0),"undefined"==typeof o&&(o=!0);var f=!1,d=!1,g={loaded:function(){var t=f?"ss.onProgressEnd":"ss.onStartEnd";if(d&&f?d&&S(i.url):u.one(t,function(){S(i.url),o||m(i.url)}),n){var r=h[i.url].destUrl;p=l.alterChangeState({id:c},h[i.url].title,r),h[i.url].state=p,e.history.pushState(p,h[i.url].title,r)}d&&!o&&m(i.url)},fetching:function(){f||(f=!0,u.one("ss.onStartEnd",function(){l.loadingClass&&r.addClass(l.loadingClass),l.onProgress.render(u),e.setTimeout(function(){u.trigger("ss.onProgressEnd"),d=!0},l.onProgress.duration)})),e.setTimeout(function(){h.hasOwnProperty(i.url)&&g[h[i.url].status]()},10)},error:function(){l.debug&&a?a.log("There was an error loading: "+i.url):e.location=i.url}};h.hasOwnProperty(i.url)||y(i),l.onStart.render(u),e.setTimeout(function(){l.scroll&&r.scrollTop(0),u.trigger("ss.onStartEnd")},l.onStart.duration),g[h[i.url].status]()},E=function(e){var n,o=t(e.currentTarget);s.shouldLoadAnchor(o,l.blacklist,l.hrefRegex)&&!d&&(e.stopPropagation(),n=s.translate(o.prop("href")),n=l.alterRequest(n),y(n))},b=function(e){var n=t(e.currentTarget);if(!e.metaKey&&!e.ctrlKey&&s.shouldLoadAnchor(n,l.blacklist,l.hrefRegex)&&(e.stopPropagation(),e.preventDefault(),!T())){A();var o=s.translate(n.prop("href"));d=!0,f=n.prop("hash"),o=l.alterRequest(o),l.onBefore(n,u),w(o)}},C=function(e){var n=t(e.currentTarget);if(!n.is(l.blacklist)&&(e.preventDefault(),e.stopPropagation(),!T())){A();var r={url:n.prop("action"),data:n.serialize(),type:n.prop("method")};d=!0,r=l.alterRequest(r),"get"===r.type.toLowerCase()&&(r.url=r.url+"?"+r.data),l.onBefore(n,u),w(r,o,l.allowFormCaching)}},P=0,T=function(){var t=null===l.repeatDelay,e=parseInt(Date.now())>P;return!(t||e)},A=function(){P=parseInt(Date.now())+parseInt(l.repeatDelay)},O=function(t){l.anchors&&l.prefetch&&t.find(l.anchors).not(l.prefetchBlacklist).on(l.prefetchOn,null,E)},R=function(t){l.anchors&&(t.on("click",l.anchors,b),O(t)),l.forms&&t.on("submit",l.forms,C)},x=function(){var t=u.prop("class");u.removeClass(t),s.redraw(u),u.addClass(t)};return l=t.extend({},t.fn.smoothState.options,l),null===e.history.state?(p=l.alterChangeState({id:c},n.title,g),e.history.replaceState(p,n.title,g)):p={},s.storePageIn(h,g,n.documentElement.outerHTML,c,p),s.triggerAllAnimationEndEvent(u,"ss.onStartEnd ss.onProgressEnd ss.onEndEnd"),R(u),{href:g,cache:h,clear:m,load:w,fetch:y,restartCSSAnimations:x}},c=function(e){return this.each(function(){var n=this.tagName.toLowerCase();this.id&&"body"!==n&&"html"!==n&&!t.data(this,"smoothState")?t.data(this,"smoothState",new u(this,e)):!this.id&&a?a.warn("Every smoothState container needs an id but the following one does not have one:",this):"body"!==n&&"html"!==n||!a||a.warn("The smoothstate container cannot be the "+this.tagName+" tag")})};e.onpopstate=l,t.smoothStateUtility=s,t.fn.smoothState=c,t.fn.smoothState.options=i}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJqcy9tYWluLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpe1xuXHR2YXIgbWFpbkhlYWRlciA9ICQoJy5jZC1hdXRvLWhpZGUtaGVhZGVyJyksXG5cdFx0c2Vjb25kYXJ5TmF2aWdhdGlvbiA9ICQoJy5jZC1zZWNvbmRhcnktbmF2JyksXG5cdFx0Ly90aGlzIGFwcGxpZXMgb25seSBpZiBzZWNvbmRhcnkgbmF2IGlzIGJlbG93IGludHJvIHNlY3Rpb25cblx0XHRiZWxvd05hdkhlcm9Db250ZW50ID0gJCgnLnN1Yi1uYXYtaGVybycpLFxuXHRcdGhlYWRlckhlaWdodCA9IG1haW5IZWFkZXIuaGVpZ2h0KCk7XG5cdFx0Y3VycmVudFNlY3Rpb24gPSAkKFwiLmNkLXNlY29uZGFyeS1uYXYgLmFjdGl2ZVwiKTtcblx0XG5cdC8vc2V0IHNjcm9sbGluZyB2YXJpYWJsZXNcblx0dmFyIHNjcm9sbGluZyA9IGZhbHNlLFxuXHRcdHByZXZpb3VzVG9wID0gMCxcblx0XHRjdXJyZW50VG9wID0gMCxcblx0XHRzY3JvbGxEZWx0YSA9IDEwLFxuXHRcdHNjcm9sbE9mZnNldCA9IDE1MCxcblx0XHRpc0hpZGRlbiA9IGZhbHNlO1xuXG5cdCQoJ2JvZHknKS5iaW5kKCdiZWZvcmV1bmxvYWQnLGZ1bmN0aW9uKCl7XG5cdFx0Y3VycmVudFNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0XHR2YXIgaG9zdCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuXHRcdGlmKHVybC5pbmRleE9mKCdodHRwOi8vJyArIGhvc3QgKyAnL3Jlc3VtZS5odG1sJykgIT0gLTEpIHtcblx0XHRcdGN1cnJlbnRTZWN0aW9uID0gJChcIiNiYXNpY2lkXCIpO1xuXHRcdH1cbiAgICBcdGN1cnJlbnRTZWN0aW9uLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0fSk7XG5cblx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0JCh0aGlzKS5zY3JvbGxUb3AoMCk7XG5cdFx0JChcIi5oZWFkZXJzXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR2YXIgZGlzdGFuY2UgPSAwXG5cdFx0XHRpZiAoJCh0aGlzKS5vZmZzZXQoKS50b3AgLSAkKCAkKHRoaXMpLmF0dHIoJ2hyZWYnKSApLm9mZnNldCgpLnRvcCA8IDApIHtcblx0XHRcdFx0ZGlzdGFuY2UgPSAoJCh0aGlzKS5vZmZzZXQoKS50b3AgLSAkKCAkKHRoaXMpLmF0dHIoJ2hyZWYnKSApLm9mZnNldCgpLnRvcCkgKyA3MDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRpc3RhbmNlID0gKCQodGhpcykub2Zmc2V0KCkudG9wIC0gJCggJCh0aGlzKS5hdHRyKCdocmVmJykgKS5vZmZzZXQoKS50b3ApIC0gNzA7XG5cdFx0XHR9XG5cdFx0XHRvZmZzZXREaXN0YW5jZSA9IDA7IFxuXHRcdFx0aWYoKGRpc3RhbmNlIDwgMzAwICYmIGlzSGlkZGVuICYmIGRpc3RhbmNlID4gMCkgXG5cdFx0XHRcdHx8IChkaXN0YW5jZSA8IC0zMDApfHwgKGRpc3RhbmNlID4gLTMwMCAmJiBpc0hpZGRlbiAmJiBkaXN0YW5jZSA8IDApKSB7XG5cdFx0XHRcdG9mZnNldERpc3RhbmNlID0gMTAwO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b2Zmc2V0RGlzdGFuY2UgPSAxNTA7XG5cdFx0XHR9XG5cdFx0XHQkKFwiYm9keSwgaHRtbFwiKS5zdG9wKHRydWUsIHRydWUpLmFuaW1hdGUoeyBcblx0XHRcdFx0c2Nyb2xsVG9wOiAkKCAkKHRoaXMpLmF0dHIoJ2hyZWYnKSApLm9mZnNldCgpLnRvcCAtIG9mZnNldERpc3RhbmNlXG5cdFx0XHR9LCAxMDAwKTtcblx0XHRcdGN1cnJlbnRTZWN0aW9uID0gJCh0aGlzKTtcblx0XHR9KTtcblx0fSk7XG5cblx0JCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpe1xuXHRcdHZhciBwb3NpdGlvbiA9ICQodGhpcykuc2Nyb2xsVG9wKCkgKyAxNzA7XG5cblx0XHQkKCcuc2VjdGlvbicpLmVhY2goZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykub2Zmc2V0KCkudG9wO1xuXHQgICAgICAgIHZhciBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcblxuXHQgICAgICAgIGlmIChwb3NpdGlvbiA+PSB0YXJnZXQpIHtcblx0ICAgICAgICBcdGN1cnJlbnRTZWN0aW9uLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0ICAgICAgICBcdGN1cnJlbnRTZWN0aW9uID0gJCgnLmNkLXNlY29uZGFyeS1uYXYgPiB1bCA+IGxpID4gYVtocmVmPVwiIycgKyBpZCArICdcIl0nKTtcbiAgICAgICAgICAgIFx0JCgnLmNkLXNlY29uZGFyeS1uYXYgPiB1bCA+IGxpID4gYVtocmVmPVwiIycgKyBpZCArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdCAgICAgICAgfVxuICAgIFx0fSk7XG5cblx0XHRpZiggIXNjcm9sbGluZyApIHtcblx0XHRcdHNjcm9sbGluZyA9IHRydWU7XG5cdFx0XHQoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG5cdFx0XHRcdD8gc2V0VGltZW91dChhdXRvSGlkZUhlYWRlciwgNTAwKVxuXHRcdFx0XHQ6IHJlcXVlc3RBbmltYXRpb25GcmFtZShhdXRvSGlkZUhlYWRlcik7XG5cdFx0fVxuXHR9KTtcblxuXHRtYWluSGVhZGVyLm9uKCdjbGljaycsICcubmF2LXRyaWdnZXInLCBmdW5jdGlvbihldmVudCl7XG5cdFx0Ly8gb3BlbiBwcmltYXJ5IG5hdmlnYXRpb24gb24gbW9iaWxlXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRtYWluSGVhZGVyLnRvZ2dsZUNsYXNzKCduYXYtb3BlbicpO1xuXHR9KTtcblxuXHQkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCl7XG5cdFx0aGVhZGVySGVpZ2h0ID0gbWFpbkhlYWRlci5oZWlnaHQoKTtcblx0fSk7XG5cblx0ZnVuY3Rpb24gYXV0b0hpZGVIZWFkZXIoKSB7XG5cdFx0dmFyIGN1cnJlbnRUb3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cblx0XHQoIGJlbG93TmF2SGVyb0NvbnRlbnQubGVuZ3RoID4gMCApIFxuXHRcdFx0PyBjaGVja1N0aWNreU5hdmlnYXRpb24oY3VycmVudFRvcCkgLy8gc2Vjb25kYXJ5IG5hdmlnYXRpb24gYmVsb3cgaW50cm9cblx0XHRcdDogY2hlY2tTaW1wbGVOYXZpZ2F0aW9uKGN1cnJlbnRUb3ApO1xuXG5cdCAgIFx0cHJldmlvdXNUb3AgPSBjdXJyZW50VG9wO1xuXHRcdHNjcm9sbGluZyA9IGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tTaW1wbGVOYXZpZ2F0aW9uKGN1cnJlbnRUb3ApIHtcblx0XHQvL3RoZXJlJ3Mgbm8gc2Vjb25kYXJ5IG5hdiBvciBzZWNvbmRhcnkgbmF2IGlzIGJlbG93IHByaW1hcnkgbmF2XG5cdCAgICBpZiAocHJldmlvdXNUb3AgLSBjdXJyZW50VG9wID4gc2Nyb2xsRGVsdGEpIHtcblx0ICAgIFx0Ly9pZiBzY3JvbGxpbmcgdXAuLi5cblx0ICAgIFx0bWFpbkhlYWRlci5yZW1vdmVDbGFzcygnaXMtaGlkZGVuJyk7XG5cdCAgICBcdGlzSGlkZGVuID0gZmFsc2U7XG5cdCAgICB9IGVsc2UgaWYoIGN1cnJlbnRUb3AgLSBwcmV2aW91c1RvcCA+IHNjcm9sbERlbHRhICYmIGN1cnJlbnRUb3AgPiBzY3JvbGxPZmZzZXQpIHtcblx0ICAgIFx0Ly9pZiBzY3JvbGxpbmcgZG93bi4uLlxuXHQgICAgXHRtYWluSGVhZGVyLmFkZENsYXNzKCdpcy1oaWRkZW4nKTtcblx0ICAgIFx0aXNIaWRkZW4gPSB0cnVlO1xuXHQgICAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tTdGlja3lOYXZpZ2F0aW9uKGN1cnJlbnRUb3ApIHtcblx0XHQvL3NlY29uZGFyeSBuYXYgYmVsb3cgaW50cm8gc2VjdGlvbiAtIHN0aWNreSBzZWNvbmRhcnkgbmF2XG5cdFx0dmFyIHNlY29uZGFyeU5hdk9mZnNldFRvcCA9IGJlbG93TmF2SGVyb0NvbnRlbnQub2Zmc2V0KCkudG9wIC0gc2Vjb25kYXJ5TmF2aWdhdGlvbi5oZWlnaHQoKSAtIG1haW5IZWFkZXIuaGVpZ2h0KCk7XG5cdFx0XG5cdFx0aWYgKHByZXZpb3VzVG9wID49IGN1cnJlbnRUb3AgKSB7XG5cdCAgICBcdC8vaWYgc2Nyb2xsaW5nIHVwLi4uIFxuXHQgICAgXHRpZiggY3VycmVudFRvcCA8IHNlY29uZGFyeU5hdk9mZnNldFRvcCkge1xuXHQgICAgXHRcdC8vc2Vjb25kYXJ5IG5hdiBpcyBub3QgZml4ZWRcblx0ICAgIFx0XHRtYWluSGVhZGVyLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKTtcblx0ICAgIFx0XHRzZWNvbmRhcnlOYXZpZ2F0aW9uLnJlbW92ZUNsYXNzKCdmaXhlZCBzbGlkZS11cCcpO1xuXHQgICAgXHRcdGJlbG93TmF2SGVyb0NvbnRlbnQucmVtb3ZlQ2xhc3MoJ3NlY29uZGFyeS1uYXYtZml4ZWQnKTtcblx0ICAgIFx0XHRpc0hpZGRlbiA9IGZhbHNlO1xuXHQgICAgXHR9IGVsc2UgaWYoIHByZXZpb3VzVG9wIC0gY3VycmVudFRvcCA+IHNjcm9sbERlbHRhKSB7XG5cdCAgICBcdFx0Ly9zZWNvbmRhcnkgbmF2IGlzIGZpeGVkXG5cdCAgICBcdFx0bWFpbkhlYWRlci5yZW1vdmVDbGFzcygnaXMtaGlkZGVuJyk7XG5cdCAgICBcdFx0c2Vjb25kYXJ5TmF2aWdhdGlvbi5yZW1vdmVDbGFzcygnc2xpZGUtdXAnKS5hZGRDbGFzcygnZml4ZWQnKTsgXG5cdCAgICBcdFx0YmVsb3dOYXZIZXJvQ29udGVudC5hZGRDbGFzcygnc2Vjb25kYXJ5LW5hdi1maXhlZCcpO1xuXHQgICAgXHRcdGlzSGlkZGVuID0gZmFsc2U7XG5cdCAgICBcdH1cblx0ICAgIFx0XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvL2lmIHNjcm9sbGluZyBkb3duLi4uXHRcblx0IFx0ICBcdGlmKCBjdXJyZW50VG9wID4gc2Vjb25kYXJ5TmF2T2Zmc2V0VG9wICsgc2Nyb2xsT2Zmc2V0KSB7XG5cdCBcdCAgXHRcdC8vaGlkZSBwcmltYXJ5IG5hdlxuXHQgICAgXHRcdG1haW5IZWFkZXIuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuXHQgICAgXHRcdHNlY29uZGFyeU5hdmlnYXRpb24uYWRkQ2xhc3MoJ2ZpeGVkIHNsaWRlLXVwJyk7XG5cdCAgICBcdFx0YmVsb3dOYXZIZXJvQ29udGVudC5hZGRDbGFzcygnc2Vjb25kYXJ5LW5hdi1maXhlZCcpO1xuXHQgICAgXHRcdGlzSGlkZGVuID0gdHJ1ZTtcblx0ICAgIFx0fSBlbHNlIGlmKCBjdXJyZW50VG9wID4gc2Vjb25kYXJ5TmF2T2Zmc2V0VG9wKSB7XG5cdCAgICBcdFx0Ly9vbmNlIHRoZSBzZWNvbmRhcnkgbmF2IGlzIGZpeGVkLCBkbyBub3QgaGlkZSBwcmltYXJ5IG5hdiBpZiB5b3UgaGF2ZW4ndCBzY3JvbGxlZCBtb3JlIHRoYW4gc2Nyb2xsT2Zmc2V0IFxuXHQgICAgXHRcdG1haW5IZWFkZXIucmVtb3ZlQ2xhc3MoJ2lzLWhpZGRlbicpO1xuXHQgICAgXHRcdHNlY29uZGFyeU5hdmlnYXRpb24uYWRkQ2xhc3MoJ2ZpeGVkJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJyk7XG5cdCAgICBcdFx0YmVsb3dOYXZIZXJvQ29udGVudC5hZGRDbGFzcygnc2Vjb25kYXJ5LW5hdi1maXhlZCcpO1xuXHQgICAgXHRcdGlzSGlkZGVuID0gdHJ1ZTtcblx0ICAgIFx0fVxuXHQgICAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbWVudCwgY2xzKSB7XG5cdCAgICByZXR1cm4gKCcgJyArIGVsZW1lbnQuY2xhc3NOYW1lICsgJyAnKS5pbmRleE9mKCcgJyArIGNscyArICcgJykgPiAtMTtcblx0fVxufSk7XG4vKiFcbiAqIHNtb290aFN0YXRlLmpzIGlzIGpRdWVyeSBwbHVnaW4gdGhhdCBwcm9ncmVzc2l2ZWx5IGVuaGFuY2VzXG4gKiBwYWdlIGxvYWRzIHRvIGJlaGF2ZSBtb3JlIGxpa2UgYSBzaW5nbGUtcGFnZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBAYXV0aG9yICBNaWd1ZWwgw4FuZ2VsIFDDqXJleiAgIHJlYWNobWVAbWlndWVsLXBlcmV6LmNvbVxuICogQHNlZSAgICAgaHR0cDovL3Ntb290aHN0YXRlLmNvbVxuICpcbiAqL1xuIWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz90KHJlcXVpcmUoXCJqcXVlcnlcIiksd2luZG93LGRvY3VtZW50KTp0KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpfShmdW5jdGlvbih0LGUsbixvKXtcInVzZSBzdHJpY3RcIjtpZighZS5oaXN0b3J5LnB1c2hTdGF0ZSlyZXR1cm4gdC5mbi5zbW9vdGhTdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx2b2lkKHQuZm4uc21vb3RoU3RhdGUub3B0aW9ucz17fSk7aWYoIXQuZm4uc21vb3RoU3RhdGUpe3ZhciByPXQoXCJodG1sLCBib2R5XCIpLGE9ZS5jb25zb2xlLGk9e2RlYnVnOiExLGFuY2hvcnM6XCJhXCIsaHJlZlJlZ2V4OlwiXCIsZm9ybXM6XCJmb3JtXCIsYWxsb3dGb3JtQ2FjaGluZzohMSxyZXBlYXREZWxheTo1MDAsYmxhY2tsaXN0OlwiLm5vLXNtb290aFN0YXRlXCIscHJlZmV0Y2g6ITEscHJlZmV0Y2hPbjpcIm1vdXNlb3ZlciB0b3VjaHN0YXJ0XCIscHJlZmV0Y2hCbGFja2xpc3Q6XCIubm8tcHJlZmV0Y2hcIixsb2NhdGlvbkhlYWRlcjpcIlgtU21vb3RoU3RhdGUtTG9jYXRpb25cIixjYWNoZUxlbmd0aDowLGxvYWRpbmdDbGFzczpcImlzLWxvYWRpbmdcIixzY3JvbGw6ITAsYWx0ZXJSZXF1ZXN0OmZ1bmN0aW9uKHQpe3JldHVybiB0fSxhbHRlckNoYW5nZVN0YXRlOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdH0sb25CZWZvcmU6ZnVuY3Rpb24odCxlKXt9LG9uU3RhcnQ6e2R1cmF0aW9uOjAscmVuZGVyOmZ1bmN0aW9uKHQpe319LG9uUHJvZ3Jlc3M6e2R1cmF0aW9uOjAscmVuZGVyOmZ1bmN0aW9uKHQpe319LG9uUmVhZHk6e2R1cmF0aW9uOjAscmVuZGVyOmZ1bmN0aW9uKHQsZSl7dC5odG1sKGUpfX0sb25BZnRlcjpmdW5jdGlvbih0LGUpe319LHM9e2lzRXh0ZXJuYWw6ZnVuY3Rpb24odCl7dmFyIG49dC5tYXRjaCgvXihbXjpcXC8/I10rOik/KD86XFwvXFwvKFteXFwvPyNdKikpPyhbXj8jXSspPyhcXD9bXiNdKik/KCMuKik/Lyk7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG5bMV0mJm5bMV0ubGVuZ3RoPjAmJm5bMV0udG9Mb3dlckNhc2UoKSE9PWUubG9jYXRpb24ucHJvdG9jb2w/ITA6XCJzdHJpbmdcIj09dHlwZW9mIG5bMl0mJm5bMl0ubGVuZ3RoPjAmJm5bMl0ucmVwbGFjZShuZXcgUmVnRXhwKFwiOihcIit7XCJodHRwOlwiOjgwLFwiaHR0cHM6XCI6NDQzfVtlLmxvY2F0aW9uLnByb3RvY29sXStcIik/JFwiKSxcIlwiKSE9PWUubG9jYXRpb24uaG9zdH0sc3RyaXBIYXNoOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoLyMuKi8sXCJcIil9LGlzSGFzaDpmdW5jdGlvbih0LG4pe249bnx8ZS5sb2NhdGlvbi5ocmVmO3ZhciBvPXQuaW5kZXhPZihcIiNcIik+LTEscj1zLnN0cmlwSGFzaCh0KT09PXMuc3RyaXBIYXNoKG4pO3JldHVybiBvJiZyfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSl7dmFyIG49e2RhdGFUeXBlOlwiaHRtbFwiLHR5cGU6XCJHRVRcIn07cmV0dXJuIGU9XCJzdHJpbmdcIj09dHlwZW9mIGU/dC5leHRlbmQoe30sbix7dXJsOmV9KTp0LmV4dGVuZCh7fSxuLGUpfSxzaG91bGRMb2FkQW5jaG9yOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnByb3AoXCJocmVmXCIpO3JldHVybiEocy5pc0V4dGVybmFsKHIpfHxzLmlzSGFzaChyKXx8dC5pcyhlKXx8dC5wcm9wKFwidGFyZ2V0XCIpfHx0eXBlb2YgbiE9PW8mJlwiXCIhPT1uJiYtMT09PXQucHJvcChcImhyZWZcIikuc2VhcmNoKG4pKX0sY2xlYXJJZk92ZXJDYXBhY2l0eTpmdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3Qua2V5c3x8KE9iamVjdC5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBlLG49W107Zm9yKGUgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKSYmbi5wdXNoKGUpO3JldHVybiBufSksT2JqZWN0LmtleXModCkubGVuZ3RoPmUmJih0PXt9KSx0fSxzdG9yZVBhZ2VJbjpmdW5jdGlvbihlLG4sbyxyLGEsaSl7dmFyIHM9dChcIjxodG1sPjwvaHRtbD5cIikuYXBwZW5kKHQobykpO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBhJiYoYT17fSksXCJ1bmRlZmluZWRcIj09dHlwZW9mIGkmJihpPW4pLGVbbl09e3N0YXR1czpcImxvYWRlZFwiLHRpdGxlOnMuZmluZChcInRpdGxlXCIpLmZpcnN0KCkudGV4dCgpLGh0bWw6cy5maW5kKFwiI1wiK3IpLGRvYzpvLHN0YXRlOmEsZGVzdFVybDppfSxlfSx0cmlnZ2VyQWxsQW5pbWF0aW9uRW5kRXZlbnQ6ZnVuY3Rpb24oZSxuKXtuPVwiIFwiK258fFwiXCI7dmFyIG89MCxyPVwiYW5pbWF0aW9uc3RhcnQgd2Via2l0QW5pbWF0aW9uU3RhcnQgb2FuaW1hdGlvbnN0YXJ0IE1TQW5pbWF0aW9uU3RhcnRcIixhPVwiYW5pbWF0aW9uZW5kIHdlYmtpdEFuaW1hdGlvbkVuZCBvYW5pbWF0aW9uZW5kIE1TQW5pbWF0aW9uRW5kXCIsaT1cImFsbGFuaW1hdGlvbmVuZFwiLGw9ZnVuY3Rpb24obil7dChuLmRlbGVnYXRlVGFyZ2V0KS5pcyhlKSYmKG4uc3RvcFByb3BhZ2F0aW9uKCksbysrKX0sdT1mdW5jdGlvbihuKXt0KG4uZGVsZWdhdGVUYXJnZXQpLmlzKGUpJiYobi5zdG9wUHJvcGFnYXRpb24oKSxvLS0sMD09PW8mJmUudHJpZ2dlcihpKSl9O2Uub24ocixsKSxlLm9uKGEsdSksZS5vbihcImFsbGFuaW1hdGlvbmVuZFwiK24sZnVuY3Rpb24oKXtvPTAscy5yZWRyYXcoZSl9KX0scmVkcmF3OmZ1bmN0aW9uKHQpe3QuaGVpZ2h0KCl9fSxsPWZ1bmN0aW9uKG4pe2lmKG51bGwhPT1uLnN0YXRlKXt2YXIgbz1lLmxvY2F0aW9uLmhyZWYscj10KFwiI1wiK24uc3RhdGUuaWQpLGE9ci5kYXRhKFwic21vb3RoU3RhdGVcIiksaT1hLmhyZWYhPT1vJiYhcy5pc0hhc2gobyxhLmhyZWYpLGw9bi5zdGF0ZSE9PWEuY2FjaGVbYS5ocmVmXS5zdGF0ZTsoaXx8bCkmJihsJiZhLmNsZWFyKGEuaHJlZiksYS5sb2FkKG8sITEpKX19LHU9ZnVuY3Rpb24oaSxsKXt2YXIgdT10KGkpLGM9dS5wcm9wKFwiaWRcIiksZj1udWxsLGQ9ITEsaD17fSxwPXt9LGc9ZS5sb2NhdGlvbi5ocmVmLG09ZnVuY3Rpb24odCl7dD10fHwhMSx0JiZoLmhhc093blByb3BlcnR5KHQpP2RlbGV0ZSBoW3RdOmg9e30sdS5kYXRhKFwic21vb3RoU3RhdGVcIikuY2FjaGU9aH0seT1mdW5jdGlvbihlLG4pe249bnx8dC5ub29wO3ZhciBvPXMudHJhbnNsYXRlKGUpO2lmKGg9cy5jbGVhcklmT3ZlckNhcGFjaXR5KGgsbC5jYWNoZUxlbmd0aCksIWguaGFzT3duUHJvcGVydHkoby51cmwpfHxcInVuZGVmaW5lZFwiIT10eXBlb2Ygby5kYXRhKXtoW28udXJsXT17c3RhdHVzOlwiZmV0Y2hpbmdcIn07dmFyIHI9dC5hamF4KG8pO3IuZG9uZShmdW5jdGlvbih0KXtzLnN0b3JlUGFnZUluKGgsby51cmwsdCxjKSx1LmRhdGEoXCJzbW9vdGhTdGF0ZVwiKS5jYWNoZT1ofSksci5mYWlsKGZ1bmN0aW9uKCl7aFtvLnVybF0uc3RhdHVzPVwiZXJyb3JcIn0pLGwubG9jYXRpb25IZWFkZXImJnIuYWx3YXlzKGZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnN0YXR1c0NvZGU/dDpuLGE9ci5nZXRSZXNwb25zZUhlYWRlcihsLmxvY2F0aW9uSGVhZGVyKTthJiYoaFtvLnVybF0uZGVzdFVybD1hKX0pLG4mJnIuYWx3YXlzKG4pfX0sdj1mdW5jdGlvbigpe2lmKGYpe3ZhciBlPXQoZix1KTtpZihlLmxlbmd0aCl7dmFyIG49ZS5vZmZzZXQoKS50b3A7ci5zY3JvbGxUb3Aobil9Zj1udWxsfX0sUz1mdW5jdGlvbihvKXt2YXIgaT1cIiNcIitjLHM9aFtvXT90KGhbb10uaHRtbC5odG1sKCkpOm51bGw7cy5sZW5ndGg/KG4udGl0bGU9aFtvXS50aXRsZSx1LmRhdGEoXCJzbW9vdGhTdGF0ZVwiKS5ocmVmPW8sbC5sb2FkaW5nQ2xhc3MmJnIucmVtb3ZlQ2xhc3MobC5sb2FkaW5nQ2xhc3MpLGwub25SZWFkeS5yZW5kZXIodSxzKSx1Lm9uZShcInNzLm9uUmVhZHlFbmRcIixmdW5jdGlvbigpe2Q9ITEsbC5vbkFmdGVyKHUscyksbC5zY3JvbGwmJnYoKSxPKHUpfSksZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dS50cmlnZ2VyKFwic3Mub25SZWFkeUVuZFwiKX0sbC5vblJlYWR5LmR1cmF0aW9uKSk6IXMmJmwuZGVidWcmJmE/YS53YXJuKFwiTm8gZWxlbWVudCB3aXRoIGFuIGlkIG9mIFwiK2krXCIgaW4gcmVzcG9uc2UgZnJvbSBcIitvK1wiIGluIFwiK2gpOmUubG9jYXRpb249b30sdz1mdW5jdGlvbih0LG4sbyl7dmFyIGk9cy50cmFuc2xhdGUodCk7XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4mJihuPSEwKSxcInVuZGVmaW5lZFwiPT10eXBlb2YgbyYmKG89ITApO3ZhciBmPSExLGQ9ITEsZz17bG9hZGVkOmZ1bmN0aW9uKCl7dmFyIHQ9Zj9cInNzLm9uUHJvZ3Jlc3NFbmRcIjpcInNzLm9uU3RhcnRFbmRcIjtpZihkJiZmP2QmJlMoaS51cmwpOnUub25lKHQsZnVuY3Rpb24oKXtTKGkudXJsKSxvfHxtKGkudXJsKX0pLG4pe3ZhciByPWhbaS51cmxdLmRlc3RVcmw7cD1sLmFsdGVyQ2hhbmdlU3RhdGUoe2lkOmN9LGhbaS51cmxdLnRpdGxlLHIpLGhbaS51cmxdLnN0YXRlPXAsZS5oaXN0b3J5LnB1c2hTdGF0ZShwLGhbaS51cmxdLnRpdGxlLHIpfWQmJiFvJiZtKGkudXJsKX0sZmV0Y2hpbmc6ZnVuY3Rpb24oKXtmfHwoZj0hMCx1Lm9uZShcInNzLm9uU3RhcnRFbmRcIixmdW5jdGlvbigpe2wubG9hZGluZ0NsYXNzJiZyLmFkZENsYXNzKGwubG9hZGluZ0NsYXNzKSxsLm9uUHJvZ3Jlc3MucmVuZGVyKHUpLGUuc2V0VGltZW91dChmdW5jdGlvbigpe3UudHJpZ2dlcihcInNzLm9uUHJvZ3Jlc3NFbmRcIiksZD0hMH0sbC5vblByb2dyZXNzLmR1cmF0aW9uKX0pKSxlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoLmhhc093blByb3BlcnR5KGkudXJsKSYmZ1toW2kudXJsXS5zdGF0dXNdKCl9LDEwKX0sZXJyb3I6ZnVuY3Rpb24oKXtsLmRlYnVnJiZhP2EubG9nKFwiVGhlcmUgd2FzIGFuIGVycm9yIGxvYWRpbmc6IFwiK2kudXJsKTplLmxvY2F0aW9uPWkudXJsfX07aC5oYXNPd25Qcm9wZXJ0eShpLnVybCl8fHkoaSksbC5vblN0YXJ0LnJlbmRlcih1KSxlLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLnNjcm9sbCYmci5zY3JvbGxUb3AoMCksdS50cmlnZ2VyKFwic3Mub25TdGFydEVuZFwiKX0sbC5vblN0YXJ0LmR1cmF0aW9uKSxnW2hbaS51cmxdLnN0YXR1c10oKX0sRT1mdW5jdGlvbihlKXt2YXIgbixvPXQoZS5jdXJyZW50VGFyZ2V0KTtzLnNob3VsZExvYWRBbmNob3IobyxsLmJsYWNrbGlzdCxsLmhyZWZSZWdleCkmJiFkJiYoZS5zdG9wUHJvcGFnYXRpb24oKSxuPXMudHJhbnNsYXRlKG8ucHJvcChcImhyZWZcIikpLG49bC5hbHRlclJlcXVlc3QobikseShuKSl9LGI9ZnVuY3Rpb24oZSl7dmFyIG49dChlLmN1cnJlbnRUYXJnZXQpO2lmKCFlLm1ldGFLZXkmJiFlLmN0cmxLZXkmJnMuc2hvdWxkTG9hZEFuY2hvcihuLGwuYmxhY2tsaXN0LGwuaHJlZlJlZ2V4KSYmKGUuc3RvcFByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpLCFUKCkpKXtBKCk7dmFyIG89cy50cmFuc2xhdGUobi5wcm9wKFwiaHJlZlwiKSk7ZD0hMCxmPW4ucHJvcChcImhhc2hcIiksbz1sLmFsdGVyUmVxdWVzdChvKSxsLm9uQmVmb3JlKG4sdSksdyhvKX19LEM9ZnVuY3Rpb24oZSl7dmFyIG49dChlLmN1cnJlbnRUYXJnZXQpO2lmKCFuLmlzKGwuYmxhY2tsaXN0KSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLCFUKCkpKXtBKCk7dmFyIHI9e3VybDpuLnByb3AoXCJhY3Rpb25cIiksZGF0YTpuLnNlcmlhbGl6ZSgpLHR5cGU6bi5wcm9wKFwibWV0aG9kXCIpfTtkPSEwLHI9bC5hbHRlclJlcXVlc3QociksXCJnZXRcIj09PXIudHlwZS50b0xvd2VyQ2FzZSgpJiYoci51cmw9ci51cmwrXCI/XCIrci5kYXRhKSxsLm9uQmVmb3JlKG4sdSksdyhyLG8sbC5hbGxvd0Zvcm1DYWNoaW5nKX19LFA9MCxUPWZ1bmN0aW9uKCl7dmFyIHQ9bnVsbD09PWwucmVwZWF0RGVsYXksZT1wYXJzZUludChEYXRlLm5vdygpKT5QO3JldHVybiEodHx8ZSl9LEE9ZnVuY3Rpb24oKXtQPXBhcnNlSW50KERhdGUubm93KCkpK3BhcnNlSW50KGwucmVwZWF0RGVsYXkpfSxPPWZ1bmN0aW9uKHQpe2wuYW5jaG9ycyYmbC5wcmVmZXRjaCYmdC5maW5kKGwuYW5jaG9ycykubm90KGwucHJlZmV0Y2hCbGFja2xpc3QpLm9uKGwucHJlZmV0Y2hPbixudWxsLEUpfSxSPWZ1bmN0aW9uKHQpe2wuYW5jaG9ycyYmKHQub24oXCJjbGlja1wiLGwuYW5jaG9ycyxiKSxPKHQpKSxsLmZvcm1zJiZ0Lm9uKFwic3VibWl0XCIsbC5mb3JtcyxDKX0seD1mdW5jdGlvbigpe3ZhciB0PXUucHJvcChcImNsYXNzXCIpO3UucmVtb3ZlQ2xhc3ModCkscy5yZWRyYXcodSksdS5hZGRDbGFzcyh0KX07cmV0dXJuIGw9dC5leHRlbmQoe30sdC5mbi5zbW9vdGhTdGF0ZS5vcHRpb25zLGwpLG51bGw9PT1lLmhpc3Rvcnkuc3RhdGU/KHA9bC5hbHRlckNoYW5nZVN0YXRlKHtpZDpjfSxuLnRpdGxlLGcpLGUuaGlzdG9yeS5yZXBsYWNlU3RhdGUocCxuLnRpdGxlLGcpKTpwPXt9LHMuc3RvcmVQYWdlSW4oaCxnLG4uZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTCxjLHApLHMudHJpZ2dlckFsbEFuaW1hdGlvbkVuZEV2ZW50KHUsXCJzcy5vblN0YXJ0RW5kIHNzLm9uUHJvZ3Jlc3NFbmQgc3Mub25FbmRFbmRcIiksUih1KSx7aHJlZjpnLGNhY2hlOmgsY2xlYXI6bSxsb2FkOncsZmV0Y2g6eSxyZXN0YXJ0Q1NTQW5pbWF0aW9uczp4fX0sYz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49dGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7dGhpcy5pZCYmXCJib2R5XCIhPT1uJiZcImh0bWxcIiE9PW4mJiF0LmRhdGEodGhpcyxcInNtb290aFN0YXRlXCIpP3QuZGF0YSh0aGlzLFwic21vb3RoU3RhdGVcIixuZXcgdSh0aGlzLGUpKTohdGhpcy5pZCYmYT9hLndhcm4oXCJFdmVyeSBzbW9vdGhTdGF0ZSBjb250YWluZXIgbmVlZHMgYW4gaWQgYnV0IHRoZSBmb2xsb3dpbmcgb25lIGRvZXMgbm90IGhhdmUgb25lOlwiLHRoaXMpOlwiYm9keVwiIT09biYmXCJodG1sXCIhPT1ufHwhYXx8YS53YXJuKFwiVGhlIHNtb290aHN0YXRlIGNvbnRhaW5lciBjYW5ub3QgYmUgdGhlIFwiK3RoaXMudGFnTmFtZStcIiB0YWdcIil9KX07ZS5vbnBvcHN0YXRlPWwsdC5zbW9vdGhTdGF0ZVV0aWxpdHk9cyx0LmZuLnNtb290aFN0YXRlPWMsdC5mbi5zbW9vdGhTdGF0ZS5vcHRpb25zPWl9fSk7Il0sImZpbGUiOiJqcy9tYWluLm1pbi5qcyJ9
